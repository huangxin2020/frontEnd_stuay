# 基本概念
## 记录
### 1. A记录    
A记录 又称IP指向，用户可以在此设置子域名并指向到自己的目标主机地址上，从而实现通过域名找到服务器。    
说明：指向的目标主机地址类型只能使用IP地址。   

> 1) 泛域名解析即将该域名所有未指定的子域名都指向一个空间。在“主机名”中填入*，“类型”为A，“IP地址/主机名”中填入web服务器的IP地址，点击“新增”按钮即可。 
> 2) 负载均衡的实现：负载均衡(Server Load Balancing，SLB)是指在一系列资源上面动态地分布网络负载。负载均衡可以减少网络拥塞，提高整体网络性能，提高自愈性， 并确保企业关键性应用的可用性。当相同子域名有多个目标地址时，表示轮循，可以达到负载均衡的目的，但需要虚拟主机服务商支持。
### 2. NS记录
NS记录 解析服务器记录。用来表明由哪台服务器对该域名进行解析。这里的NS记录只对子域名生效。     

### 3. CNAME    
CNAME 通常称别名指向。您可以为一个主机设置别名。比如设置test.mydomain.com，用来指向一个主机www.rddns.com那么以后就可以用test.mydomain.com来代替访问www.rddns.com了。       

> 1. CNAME的目标主机地址只能使用主机名，不能使用IP地址；
> 2. 主机名前不能有任何其他前缀，如：**http://** 等是不被允许的
> 3. A记录优先于CNAME记录。即如果一个主机地址同时存在A记录和CNAME记录，则CNAME记录不生效。    

### 4. MX记录
邮件交换记录。用于将以该域名为结尾的电子邮件指向对应的邮件服务器以进行处理。

---

## 域
### 1. 域的划分
有两种划分方式，一种互联网刚兴起时的按照行业性质划分的com.\net.等，一种是按国家划分的如cn.\jp.\等。       
每个域都会有域名服务器，叫**权威域名服务器**。      

### 2. 根域
就是所谓的“.”,其实我们的网址 **www.baidu.com** 在配置当中应该是 **www.baidu.com.** （最后有一点），一般我们在浏览器里输入时会省略后面的点，而这也已经成为了习惯。        
根域服务器的IP一共有13个，在全球各地有很多份13台根域的镜像。    


### 3. 顶级域
> **Baidu.com**就是一个顶级域名，而 **www.baidu.com** 却不是顶级域名，他是在 **baidu.com** 这个域里的一叫做 **www** 的主机。

# 域名解析流程    
1. 现在我有一台计算机，通过ISP接入了互联网，那么ISP就会给我分配一个DNS服务器，这个DNS服务器不是权威服务器，而是相当于一个代理的dns解析服务器，他会帮你迭代权威服务器返回的应答，然后把最终查到IP返回给你。

2. 现在的我计算机要向这台ISPDNS发起请求查询www.baidu.com这个域名了。

3. ISPDNS拿到请求后，先检查一下自己的缓存中有没有这个地址，有的话就直接返回。这个时候拿到的ip地址，会被标记为非权威服务器的应答。

4. 如果缓存中没有的话，ISPDNS会从配置文件里面读取13个根域名服务器的地址。然后像其中一台发起请求。

5. 根服务器拿到这个请求后，知道他是com.这个顶级域名下的，所以就会返回com域中的NS记录。

6. 然后ISPDNS向其中一台再次发起请求，com域的服务器发现你这请求是baidu.com这个域的，我一查发现了这个域的NS，那我就返回给你，你再去查。

7. ISPDNS不厌其烦的再次向baidu.com这个域的权威服务器发起请求，baidu.com收到之后，查了下有www的这台主机，就把这个IP返回给你了，

8. 然后ISPDNS拿到了之后，将其返回给了客户端，并且把这个保存在高速缓存中。